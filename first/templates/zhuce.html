<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>zhuce</title>
    <script src="/static/jquery-3.3.1.js"></script>
</head>
<body>
    <p><input type="text" name="username"  onblur="func1(this)"><span id="error"></span></p>
    <p><input type="password" name="pwd"></p>
    <input type="submit" value="submit">
    <script>
        function func1(self) {
            var username=self.value;

            var usererror=document.getElementById("error")
            var httpobj=new XMLHttpRequest();
            httpobj.open("POST","/ajax_register/");
            httpobj.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
            httpobj.send("username="+username)
            httpobj.onreadystatechange=function () {
                if ( httpobj.readyState==4 && httpobj.status==200){

                    data=httpobj.responseText;

                    if(data=="1"){
                        alert(1)
                        usererror.innerHTML="用户名被注册"
                    }
                    else{
                       usererror.innerHTML=""
                    }
            }
            }

        }
        
    </script>
</body>
</html>